{% extends "index.html" %}
 
{% block content %}

{% if pageData.editing %}


	{% if pageData.newCylinder %}
		<form action="{{ url_for('cylinders_bp.submit_cylinder') }}" method="POST" id="cylReportForm">		
	{% else %}
		<form action="{{ url_for('cylinders_bp.update_cylinder') }}" method="POST" id="cylReportForm">
	{% endif %}
		<input type="hidden" name="cylinderID" value="{{ data.id }}">
		<input type="hidden" name="newCylinder" value="{{ pageData.newCylinder }}">
{% endif %}

<div class="card card-primary card-outline mb-4 view_cylinder">
	<div class="card-header">
		<div class="card-title">
			{% if pageData.editing %}

				<input type="text" class="form-control"  size="80" maxlength="{{ data.fieldTable.dataFields.reportTitle.maxlength }}" id="{{ data.fieldTable.dataFields.reportTitle.label }}" name="{{ data.fieldTable.dataFields.reportTitle.label }}" value="{{ data.fieldTable.dataFields.reportTitle.val }}" aria-describedby="textDesc">
			{% else %}
				{{ data.fieldTable.dataFields.reportTitle.val | e }}
			{% endif %}
			
		</div>
	</div>
	
<div class="card-body">
	<table class="table table-bordered">

	<tbody>
		<tr>
			<td><b>Mix and Field Data:</b></td>
		</tr>
		<tr>
			<td>
				<div class="container">
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.projectName.label }}" class="">Project:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.projectName.maxlength }}" id="{{ data.fieldTable.dataFields.projectName.label }}" name="{{ data.fieldTable.dataFields.projectName.label }}"  value="{{ data.fieldTable.dataFields.projectName.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.projectName.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.contractor.label }}" class="">Contractor:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.contractor.maxlength }}" id="{{ data.fieldTable.dataFields.contractor.label }}" name="{{ data.fieldTable.dataFields.contractor.label }}"  value="{{ data.fieldTable.dataFields.contractor.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.contractor.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
				</div>
				
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.placementType.label }}" class="">Type of Placement:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.placementType.maxlength }}" id="{{ data.fieldTable.dataFields.placementType.label }}" name="{{ data.fieldTable.dataFields.placementType.label }}"  value="{{ data.fieldTable.dataFields.placementType.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.placementType.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.ticketNum.label }}" class="">Ticket #:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" maxlength="{{ data.fieldTable.dataFields.ticketNum.maxlength }}" class="form-control" id="{{ data.fieldTable.dataFields.ticketNum.label }}" name="{{ data.fieldTable.dataFields.ticketNum.label }}"  value="{{ data.fieldTable.dataFields.ticketNum.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.ticketNum.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
				</div>
				
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.sampledFrom.label }}">Sampled From:</label>
							</div>
							
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.sampledFrom.maxlength }}" id="{{ data.fieldTable.dataFields.sampledFrom.label }}" name="{{ data.fieldTable.dataFields.sampledFrom.label }}"  value="{{ data.fieldTable.dataFields.sampledFrom.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.sampledFrom.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.cementType.label }}" class="">Cement Type:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.cementType.maxlength }}" id="{{ data.fieldTable.dataFields.cementType.label }}" name="{{ data.fieldTable.dataFields.cementType.label }}"  value="{{ data.fieldTable.dataFields.cementType.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.cementType.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
				</div>
				
				
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.supplier.label }}" class="">Supplier:</label>
							</div>
							
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.supplier.maxlength }}" id="{{ data.fieldTable.dataFields.supplier.label }}" name="{{ data.fieldTable.dataFields.supplier.label }}"  value="{{ data.fieldTable.dataFields.supplier.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.supplier.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.mixID.label }}" class="">Mix ID:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.mixID.maxlength }}" id="{{ data.fieldTable.dataFields.mixID.label }}" name="{{ data.fieldTable.dataFields.mixID.label }}"  value="{{ data.fieldTable.dataFields.mixID.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.mixID.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
				</div>
				
				
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.volume.label }}" class="">Load Volume ({{ data.fieldTable.dataFields.volumeUnits.val | volume_units_f }}<sup>3</sup>):</label>
							</div>

							<div class="cylFormData">
							{% if pageData.editing %}
								<div class="row align-items-center">
									<div class="col-5">
										<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.volume.maxlength }}" id="{{ data.fieldTable.dataFields.volume.label }}" name="{{ data.fieldTable.dataFields.volume.label }}"  value="{{ data.fieldTable.dataFields.volume.val }}" aria-describedby="textDesc">
									</div>
									
									{% for key,value in tables.loadVolumeData.items() %}
									
									<div class="col">
										<input class="form-check-input" type="radio" name="{{ data.fieldTable.dataFields.volumeUnits.label }}" value="{{ key }}" {% if key == data.fieldTable.dataFields.volumeUnits.val %} checked {% endif %}> 
										<label class="form-check-label">
											{{ value }}<sup>3</sup>
										</label>
									</div>
		
									{% endfor %}
								</div>
								
							{% else %}
								{{ data.fieldTable.dataFields.volume.val | round_val_f(data.fieldTable.dataFields.volume.precision) }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.loadNum.label }}" class="">Load #:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.loadNum.maxlength }}" id="{{ data.fieldTable.dataFields.loadNum.label }}" name="{{ data.fieldTable.dataFields.loadNum.label }}"  value="{{ data.fieldTable.dataFields.loadNum.label.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.loadNum.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
				</div>
				
				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.truckNum.label }}" class="">Truck #:</label>
							</div>
							
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.truckNum.maxlength }}" id="{{ data.fieldTable.dataFields.truckNum.label }}" name="{{ data.fieldTable.dataFields.truckNum.label }}"  value="{{ data.fieldTable.dataFields.truckNum.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.truckNum.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
						
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.mouldType.label }}" class="">Mould Type:</label>
							</div>
								<div class="cylFormData">
								{% if pageData.editing %}
									<select class="form-select" name="{{ data.fieldTable.dataFields.mouldType.label  }}" id="{{ data.fieldTable.dataFields.mouldType.label  }}">
									{% for key,value in tables.mouldData.items() %}	
										<option value="{{ key }}" {% if key == data.fieldTable.dataFields.mouldType.val %}selected{% endif %}>{{ value }}</option>
									{% endfor %}
									</select>
								{% else %}
									{{ data.fieldTable.dataFields.mouldType.val | mould_f }}
								{% endif %}				
							</div>					
						</div>
					</div>
						
				</div>

				<div class="row">
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label for="{{ data.fieldTable.dataFields.poNum.label }}">PO #:</label>
							</div>
							<div class="cylFormData">
							{% if pageData.editing %}
								<input type="text" class="form-control" maxlength="{{ data.fieldTable.dataFields.poNum.maxlength }}" id="{{ data.fieldTable.dataFields.poNum.label }}" name="{{ data.fieldTable.dataFields.poNum.label }}"  value="{{ data.fieldTable.dataFields.poNum.val }}" aria-describedby="textDesc">
							{% else %}
								{{ data.fieldTable.dataFields.poNum.val | e }}
							{% endif %}
							</div>
						</div>
					</div>
					
					<div class="col">
						<div class="row align-items-center mb-3">
							<div class="cylFormLabels">
								<label>SCC:</label>
							</div>
							<div class="cylFormData">
								<div class="row">
									{% if pageData.editing %}
											{% for key,value in tables.sccData.items() %}
											<div class="col">
											
												<input class="form-check-input" type="radio" name="{{ data.fieldTable.dataFields.isScc.label }}" id="gridRadios{{ value }}" value="{{ key }}" {% if key == data.fieldTable.dataFields.isScc.val %} checked {% endif %}> 
												<label class="form-check-label" for="gridRadios{{ value }}">
													{{ value }}
												</label>
											</div>
											{% endfor %}

									{% else %}
									<div class="col">
										{{ data.fieldTable.dataFields.isScc.val | scc_f }}
									</div>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>
		</div>
		</td>
	</tr>

	</tbody>
	</table>
	
	<br />

	<table class="table table-bordered">
		<tbody>
		<tr>
			<td colspan="2"><b>Date and Time:</b></td>
		
		</tr>
		<tr>
			<td colspan="2">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="row align-items-center mt-3 mb-3">
							<div class="cylFormLabels">
								<label for="cylCastDate" class="">Cast Date:</label>
							</div>
							<div class="cylFormDate">
							{% if pageData.editing %}
								<input class="form-control" type="date" name="{{ data.fieldTable.dataFields.castDate.label }}" id="cylCastDate" value="{{ data.fieldTable.dataFields.castDate.val | strip_time_f }}">
							{% else %}
								{{ data.fieldTable.dataFields.castDate.val | strip_time_f }}
							{% endif %}
							</div>
						</div>
					</div>
						<div class="col">
							<div class="row align-items-center mt-3 mb-3">
								<div class="cylFormLabels">
									<label for="data.fieldTable.dataFields.dateTransported.label" class="">Date Transported:</label>
								</div>
								<div class="cylFormDate">
								{% if pageData.editing %}
									<input class="form-control" type="date" name="{{ data.fieldTable.dataFields.dateTransported.label }}" value="{{ data.fieldTable.dataFields.dateTransported.val | strip_time_f }}" id="{{ data.fieldTable.dataFields.dateTransported.label }}">
								{% else %}
									{{ data.fieldTable.dataFields.dateTransported.val | strip_time_f }}
								{% endif %}
								</div>
							</div>
						</div>
	
				</div>
			</div>
			</td>
		</tr>

		<tr>

			<td colspan="2">
				<div class="container">
					<div class="row">
						<div class="col">
							<div class="row align-items-center mt-3 mb-3">
								<div class="cylFormLabels">
									<label for="{{ data.fieldTable.dataFields.batchTime.label }}" class="">Batch Time:</label>
								</div>
								<div class="cylFormTime">
								{% if pageData.editing %}
									<input type="time" class="form-control " id="data.fieldTable.dataFields.batchTime.label" name="{{ data.fieldTable.dataFields.batchTime.label }}"  value="{{ data.fieldTable.dataFields.batchTime.val }}" aria-describedby="textDesc">
								{% else %}
									{{ data.fieldTable.dataFields.batchTime.val | strip_seconds_f }}
								{% endif %}
								</div>
							</div>
						</div>
					
					</div>
					<div class="row">
						<div class="col">
							<div class="row align-items-center mb-3">
								<div class="cylFormLabels">
									<label for="{{ data.fieldTable.dataFields.sampleTime.label }}">Sample Time:</label>
								</div>
								<div class="cylFormTime">
								{% if pageData.editing %}
									<input type="time" class="form-control" id="{{ data.fieldTable.dataFields.sampleTime.label }}" name="{{ data.fieldTable.dataFields.sampleTime.label }}"  value="{{ data.fieldTable.dataFields.sampleTime.val }}" aria-describedby="textDesc">
								{% else %}
									{{ data.fieldTable.dataFields.sampleTime.val | strip_seconds_f }}
								{% endif %}
								</div>
							</div>
						</div>
					</div>
			
					
					<div class="row">
						<div class="col">
							<div class="row align-items-center mb-3">
								<div class="cylFormLabels">
									<label for="{{ data.fieldTable.dataFields.castTime.label }}">Cast Time:</label>
								</div>
								<div class="cylFormTime">
								{% if pageData.editing %}
									<input type="time" class="form-control" id="{{ data.fieldTable.dataFields.castTime.label }}" name="{{ data.fieldTable.dataFields.castTime.label }}"  value="{{ data.fieldTable.dataFields.castTime.val }}" aria-describedby="textDesc">
								{% else %}
									{{ data.fieldTable.dataFields.castTime.val | strip_seconds_f }}
								{% endif %}
								</div>
							</div>
						</div>
					</div>
				</div>
			</td>
		
		</tr>
		
	</tbody>
	</table>

	<br />

	
	<table class="table table-bordered align-middle" id="rootTable">
		<thead>
		<tr>
			<th colspan="3">Strength Target:</th>
		</tr>
	
		{% if pageData.editing %}
		<tr>
			<td colspan="3">
				<button type="button" id="strAddTarget" class="btn btn-primary">Add Target</button>
				<button type="button" id="strRemoveTarget" class="btn btn-primary">Remove Target</button>
			</td>	
		</tr>
		{% endif %}
	
		<tr class="align-center">
			<th scope="col"></th>
			<th scope="col" class="col-4">Strength (MPa)</th>
			<th scope="col" class="col-4">Days</th>
		</tr>
		</thead>
		
		<tbody id="table-body">	
			{% for row in data.strTable %}
				<tr class="align-center" id="{{ row.name }}">
					<th scope="row">
						<label class="">{{ row.title }}:</label>
					</th>

					<td>
						{% if pageData.editing %}
							<input type="number" class="form-control cylStrInput" id="{{ row.dataFields.strength.label }}" name="{{ row.dataFields.strength.label }}" value="{{ row.dataFields.strength.val }}"  aria-describedby="textDesc">
							<div class="form-text error-msg" id="{{ row.dataFields.strength.errorLabel }}"> </div>
						{% else %}
							<div class="">
								{{ row.dataFields.strength.val }}
							</div>
						{% endif %}
						
					</td>
					<td>
						{% if pageData.editing %}
							<input type="number" class="form-control cylStrInput" id="{{ row.dataFields.days.label }}" name="{{ row.dataFields.days.label }}"  value="{{ row.dataFields.days.val }}" aria-describedby="textDesc">
							<div class="form-text error-msg" id="{{ row.dataFields.days.errorLabel }}"> </div>
						{% else %}
							<div class="">
								{{ row.dataFields.days.val }}
							</div>	
						{% endif %}			
					
					</td>
		
				</tr>
		

				<input type="hidden" id="{{ row.dataFields.autoID.label }}" name="{{ row.dataFields.autoID.label }}" value="{{ row.dataFields.autoID.val }}">
				<input type="hidden" id="{{ row.dataFields.visible.label }}" name="{{ row.dataFields.visible.label }}" value="{{ row.dataFields.visible.val }}">

		
			{% endfor %}
		

		</tbody>
	</table>
	<br />	

	<div class="table-responsive">
	<table class="table table-bordered align-middle">
		<thead>
			<tr>
				<th colspan="5">Measurements:</th>
			</tr>
			
			{% if pageData.editing %}
			<tr>
				<th colspan="5">
					<div class="col">
						<div class="container">
							<div class="row align-items-center">

								<div class="cylFormLabels">
										<label>Air Options:</label>
								</div>
								
								<div class="cylFormData">
										{% if pageData.editing %}
											<select class="form-select" name="{{ data.fieldTable.dataFields.airOptions.label  }}" id="{{ data.fieldTable.dataFields.airOptions.label  }}">
											{% for key,value in tables.airOptions.items() %}	
												<option value="{{ key }}" {% if key == data.fieldTable.dataFields.airOptions.val %}selected{% endif %}>{{ value }}</option>
											{% endfor %}
											</select>
										{% else %}
											{{ data.fieldTable.dataFields.airOptions.val | mould_f }}
										{% endif %}				
								</div>					
							</div>
						</div>
					</div>
				</th>
			</tr>
			{% endif %}

			<tr class="align-center">
				<th scope="col" class="cylConditionsLabel"></th>
				<th scope="col">Actual</th>
				<th scope="col">Min</th>
				<th scope="col">Max</th>
				<th scope="col">Notes</th>
			</tr>
		</thead>
		
		<tbody>	
		
		{% for row in data.conditionsTable %}

			<tr class="align-center" id="{{ row.name }}">

					<th scope="row">{{ row.title | safe }}</th>
	
				{% if pageData.editing %}
					
					<td><input type="text" maxlength="{{ row.dataFields.actual.maxlength }}" class="form-control cylConditionsData" id="{{ row.dataFields.actual.label }}" name="{{ row.dataFields.actual.label }}"  value="{{ row.dataFields.actual.val }}" aria-describedby="textDesc"></td>
					<td><input type="text" maxlength="{{ row.dataFields.min.maxlength }}" class="form-control cylConditionsData" id="{{ row.dataFields.min.label }}" name="{{ row.dataFields.min.label }}"  value="{{ row.dataFields.min.val }}" aria-describedby="textDesc"></td>
					<td><input type="text" maxlength="{{ row.dataFields.max.maxlength }}" class="form-control cylConditionsData" id="{{ row.dataFields.max.label }}" name="{{ row.dataFields.max.label }}"  value="{{ row.dataFields.max.val }}" aria-describedby="textDesc"></td>
					<td><input type="text" maxlength="{{ row.dataFields.notes.maxlength }}" class="form-control cylConditionsNotesText" id="{{ row.dataFields.notes.label }}" name="{{ row.dataFields.notes.label }}"  value="{{ row.dataFields.notes.val }}" aria-describedby="textDesc"></td>
					<input type="hidden" name="{{ row.dataFields.autoID.label }}" value="{{ row.dataFields.autoID.val }}">

				{% else %}
					
					<td>{{ row.dataFields.actual.val | round_val_f(row.dataFields.actual.precision ) }}</td>
					
					{% if ((row.property == 'air') and (data.fieldTable.dataFields.airOptions.val == 'natural')) %}
						<td colspan="2">Natural</td>
					{% else %}	
						<td>{{ row.dataFields.min.val | round_val_f(row.dataFields.min.precision) }}</td>
						<td>{{ row.dataFields.max.val | round_val_f(row.dataFields.max.precision) }}</td>

					{% endif %}
					<td class="align-left">{{ row.dataFields.notes.val }}</td>
					
				{% endif %}
		
			</tr>

		{% endfor %}

	</table>		
	</div>
	
	
	{% if pageData.editing %}
	<table class="table table-bordered align-middle">
		<thead>
			<tr>
				<th colspan="">Add Cylinders:</th>
			</tr>

		</thead>
		<tr>
			<th>
				<div class="container">
					<div class="row align-items-center mt-3 mb-3">
		
						<div class="cylFormLabels">
							<label for="" class=""># of Cylinders:</label>
						</div>
						<div class="cylFormDate">
							<input maxlength="10" type="text" class="form-control" name="numItemsIn" id="numItemsIn">
							<div class="form-text error-msg" id="numItemsErrorMsg"></div>
						</div>
					</div>	
					
					<hr>
					
					<div class="row align-items-center mt-3 mb-3">
						<div class="" style="">
							<label for="" class="underline">Specimen ID</label>
						</div>
					</div>
						
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="" class="">Tech Initials:</label>
						</div>
							
						<div class="cylFormDate">
								<input maxlength="20" type="text" class="form-control" name="itemsInitialsIn" id="itemsInitialsIn" value="">
								<div class="form-text error-msg" id="itemsInitialsErrorMsg"></div>
						</div>
					</div>
					
					<div class="row align-items-center mt-3 mb-3">

						<div class="cylFormLabels">
							<label for="" class="">ID Date:</label>
						</div>
					
						<div class="cylFormDate">
							<input class="form-control" type="date" name="{{ data.fieldTable.dataFields.dateSpecimen.label }}" value="{{ data.fieldTable.dataFields.dateSpecimen.val | strip_time_f }}" id="{{ data.fieldTable.dataFields.dateSpecimen.label }}">
							<div class="form-text error-msg" id="itemsDateSpecimenErr"></div>

						</div>
					
						<div class="cylFormData"> 
							<input class="form-check-input" type="checkbox" id="{{ data.fieldTable.dataFields.dateSpecimenEqual.label }}" name="{{ data.fieldTable.dataFields.dateSpecimenEqual.label }}"  {{ data.fieldTable.dataFields.dateSpecimenEqual.val }}> 
							<label class="form-check-label normal-text" for="{{ data.fieldTable.dataFields.dateSpecimenEqual.label }}">Same as Cast Date</label>
						</div>
					
					</div>
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="" class="">Separator:</label>
						</div>
						<div class="cylFormDate">
							<select class="form-select" name="" id="itemsSeparatorSelect">
								{% for key,val in tables.separatorData.items() %}
									<option value="{{key}}">{{val}}</option>
								{% endfor %}
							</select>
						</div>
					</div>
					
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="" class="">Set:</label>
						</div>
						<div class="cylFormDate">
							<select class="form-select" name="" id="itemsSetSelect">
								{% for key,val in tables.setData.items() %}
									<option value="{{key}}">{{val}}</option>
								{% endfor %}
							</select>
						</div>
					</div>
					
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="" class="">Custom ID:</label>
						</div>
						<div class="cylFormDate">
								<input maxlength="20" type="text" class="form-control" name="itemsCustomID" id="itemsCustomID" value="">
								<div class="form-text error-msg" id="itemsCustomIDErr"></div>
						</div>
						<div class="cylFormData"> 
							<input class="form-check-input" type="checkbox" id="customIDCheck" name=""> 
							<label class="form-check-label normal-text" for="">Use Custom ID</label>
						</div>

					</div>
				
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="" class="">Example Output:</label>
						</div>
						<div class="cylFormDate" id="itemsExampleID"></div>
					</div>
					
					<hr>
					
					<div class="row align-items-center mt-3 mb-3">
						<div class="cylFormLabels">
							<label for="cylDateTransported" class="">Date Received:</label>
						</div>
						
						<div class="cylFormDate">
							<input class="form-control" type="date" name="{{ data.fieldTable.dataFields.dateReceived.label }}" value="{{ data.fieldTable.dataFields.dateReceived.val | strip_time_f }}" id="{{ data.fieldTable.dataFields.dateReceived.label }}">
							<div class="form-text error-msg" id="itemsDateReceivedErr"></div>
						</div>
						
						<div class="cylFormData"> 
							<input class="form-check-input" type="checkbox" id="{{ data.fieldTable.dataFields.dateReceivedEqual.label }}" name="{{ data.fieldTable.dataFields.dateReceivedEqual.label }}"  {{ data.fieldTable.dataFields.dateReceivedEqual.val }}> 
							<label class="form-check-label normal-text" for="{{ data.fieldTable.dataFields.dateReceivedEqual.label }}">Same as Transported Date</label>
						</div>
					</div>
					
				</div>
				<button type="button" class="btn btn-primary" id="btnAddItems" disabled>Add Cylinders</button>
			</th>	
		</tr>
	</table>
	{% endif %}

	<br />

	<div class="table-responsive">
		<table class="table table-bordered align-middle" id="cylItemsTable">
			<thead>
				<tr>
					<th colspan="14">Cylinder Data:</th>
				</tr>
			
			</thead>
			
			<tbody>
			<tr class="align-center">
				<th scope="col" class="size11">Specimen ID</th>
				<th scope="col" class="size9">Date Received</th>
				<th scope="col" class="size9">Date Tested</th>
				<th scope="col" class="size3">Age (Days)</th>
				<th scope="col" class="size3">Diameter (mm)</th>
				<th scope="col" class="size3">Length (mm)</th>
				<th scope="col" class="size5">Area (mm<sup>2</sup>)</th>
				<th scope="col" class="size6">Weight (g)</th>
				<th scope="col" class="size5">Strength (Mpa)</th>
				<th scope="col" class="size2">Break Type</th>
				<th scope="col" class="size3">Required Strength</th>
				<th scope="col" class="size3">% of Required</th>
				<th scope="col" class="size3">Tech Initial</th>
				
			</tr>
			
			{%  if pageData.editing %}

			<tr class="">
				<td colspan="14"><button type="button" class="btn btn-primary" id="btnAddItemsRow">Add Row</button></td>
			</tr>
			

			{% else %}
			
				{% for row in data.cylItemsTable %}
					<tr class="align-center" id="cylItemsRow">
						<td>{{ row.dataFields.itemID.val }}</td>
						<td>{{ row.dataFields.dateReceived.val }}</td>
						<td>{{ row.dataFields.dateTested.val }}</td>
						<td>{{ row.dataFields.age.val }}</td>
						<td>{{ row.dataFields.diameter.val }}</td>
						<td>{{ row.dataFields.length.val }}</td>
						<td>{{ row.dataFields.area.val }}</td>
						<td>{{ row.dataFields.weight.val }}</td>
						<td>{{ row.dataFields.strength.val }}</td>
						<td>{{ row.dataFields.breakType.val }}</td>
						<td>{{ row.dataFields.requiredStrength.val }}</td>
						<td>{{ row.dataFields.percentStrength.val }}</td>
						<td>{{ row.dataFields.initials.val }}</td>
						
					</tr>
				{% endfor %}
			{% endif %}


		</table>		
	</div>
		
	<table class="table table-bordered">
		<tbody>	
			<tr class="align-middle">
				<td>Notes:</td>
				<td>
				{% if pageData.editing %}
					<div class="form-group">
                        <textarea name="{{ data.fieldTable.dataFields.notes.label }}" id="{{ data.fieldTable.dataFields.notes.label }}" class="form-control" rows="3" placeholder="">{{ data.fieldTable.dataFields.notes.value | e }}</textarea>
                      </div>
				{% else %}
					{{ data.fieldTable.dataFields.notes.value | e }}
				{% endif %}
				</td>
				
			</tr>
			<tr class="align-middle">
				<td>Files:</td>
				<td>
				{% if pageData.editing %}
					<div class="form-group">
                       
                      </div>
				{% else %}

				{% endif %}
				</td>
				
			</tr>
			
			<tr class="align-middle">
				<td>Status:</td>
				<td>
				{% if pageData.editing %}
						<select class="form-select cylFormData" name="{{ data.fieldTable.dataFields.status.label }}" id="{{ data.fieldTable.dataFields.status.label }}">
						{% for key,value in tables.statusData.items() %}	
							<option value="{{ key }}" {% if key == data.fieldTable.dataFields.status.val %}selected{% endif %}>{{ value }}</option>
						{% endfor %}
						</select>
				{% else %}
					{{ data.fieldTable.dataFields.status.val | project_status_f }}
				{% endif %}
				</td>
			
			</tr>
			<tr class="align-middle">
				<td>Created by:</td>
				<td>{{ data.fieldTable.dataFields.createdBy.val | e }}</td>
			</tr>
			<tr class="align-middle">
				<td>Date Created:</td>
				<td> {{ data.fieldTable.dataFields.dateCreated.val | date_created_f }} </td>
			</tr>
			<tr class="align-middle">
				<td>Date Modified:</td>
				<td>  </td>
			</tr>


		</tbody>
	</table>

	<br />
	
	{% if pageData.editing %}
		<button type="submit" class="btn btn-primary" form="cylReportForm">Save</button> 
		{% if pageData.newCylinder %}
			<button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('cylinders_bp.cylinders') }}'">Cancel</button> 
		{% else %}
			<button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('cylinders_bp.view_cylinder', cylinder_id = data.fieldTable.dataFields.cylinderID.val) }}'">Cancel</button> 
		{% endif %}

	{% else %}
		<a href="{{ url_for('cylinders_bp.view_cylinder', cylinder_id=data.fieldTable.dataFields.cylinderID.val, edit=True) }}"><button type="button" class="btn btn-primary">Edit Cylinder</button></a>
		<div style="float:right"><a href="{{ url_for('cylinders_bp.confirm_delete', cylinder_id=data.fieldTable.dataFields.cylinderID.val) }}"><button type="button" class="btn btn-danger">Delete</button></a></div>
	{% endif %}

	</div>

</div>

{% if pageData.editing %}
	</form>
{% endif %}

	<script>
		const cyl_editing_json = {{ pageData.editing | tojson }};
		const cyl_id = {{ data.id | tojson }};
	</script>

	<script src="{{ url_for('static', filename='js/cyl_form.js') }}"></script> 

		
{% endblock %}